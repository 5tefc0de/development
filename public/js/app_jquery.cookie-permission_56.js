;(function($,window){'use strict';$.plugin('swCookiePermission',{defaults:{isHiddenClass:'is--hidden',acceptButtonSelector:'.cookie-permission--accept-button',privacyLinkSelector:'.cookie-permission--privacy-link',shopId:0,urlPrefix:''},cookieStorageKeyPrefix:'hide-cookie-permission',init:function(){var me=this;me.applyDataAttributes();me.createProperties();me.preparePrivacyLink();me.registerEvents();me.displayCookiePermission(function(display){if(display){me.showElement();}});},createProperties:function(){var me=this;me.$privacyLink=me.$el.find(me.opts.privacyLinkSelector);me.$acceptButton=me.$el.find(me.opts.acceptButtonSelector);me.storageKey=me.createStorageKey();me.storage=window.StorageManager.getLocalStorage();},preparePrivacyLink:function(){var me=this,prefix=me.opts.urlPrefix,href;if(!me.$privacyLink){return;}
href=me.$privacyLink.attr('href')||'';if(href.match(/^(http:|https:)/)){return;}
if(href.match(/^\//)){prefix=me.opts.urlPrefix.replace(/(\/)$/,'');}
me.$privacyLink.attr('href',[prefix,href].join(''));},registerEvents:function(){var me=this;me._on(me.$acceptButton,'click',$.proxy(me.onAcceptButtonClick,me));},displayCookiePermission:function(callback){var me=this;callback(!me.storage.getItem(me.storageKey));},createStorageKey:function(){var me=this,delimiter='-';return[me.cookieStorageKeyPrefix,delimiter,me.opts.shopId].join('');},onAcceptButtonClick:function(){var me=this;me.storage.setItem(me.storageKey,'true');me.hideElement();},showElement:function(){var me=this;me.$el.removeClass(me.opts.isHiddenClass);},hideElement:function(){var me=this;me.$el.addClass(me.opts.isHiddenClass);}});}(jQuery,window));